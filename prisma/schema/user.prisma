model User {
  userId            String  @id @default(cuid()) @map("user_id")
  email             String  @unique @db.VarChar(100)
  password          String
  role              Role    @default(USER)
  verificationToken String? @map("verification_token")

  resetPasswordToken          String?   @map("reset_password_token")
  resetPasswordTokenExpiresAt DateTime? @map("reset_password_token_expires_at")

  firstName String @map("first_name")
  avatarUrl String @default("") @map("avatar_url")

  userProfile    UserProfile?
  fitnessProfile FitnessProfile?

  recipes  Recipe[]
  comments Comment[]
  likes    Like[]

  shoppingList ShoppingList?

  cart   Cart?
  orders Order[]

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("users")
}

model UserProfile {
  profileId String  @id @default(cuid()) @map("profile_id")
  fullName  String? @map("full_name")
  gender    Gender?
  birthYear Int?    @map("birth_year")
  bio       String?

  user   User   @relation(fields: [userId], references: [userId], onDelete: Cascade)
  userId String @unique @map("user_id")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("user_profiles")
}

model FitnessProfile {
  fitnessProfileId String @id @default(cuid()) @map("fitness_profile_id")

  heightCm      Int?     @map("height_cm")
  currentWeight Decimal? @map("current_weight")
  targetWeight  Int?     @map("target_weight")

  chestCm Int? @map("chest_cm")
  waistCm Int? @map("waist_cm")
  thighCm Int? @map("thigh_cm")
  armCm   Int? @map("arm_cm")

  activityLevel ActivityLevel? @map("activity_level")
  nutritionGoal NutritionGoal? @map("nutrition_goal")

  user   User   @relation(fields: [userId], references: [userId], onDelete: Cascade)
  userId String @unique @map("user_id")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("fitness_profiles")
}
