model Product {
  productId   String  @id @default(cuid()) @map("product_id")
  productName String  @map("product_name")
  iconUrl     String? @map("icon_url")

  isActive Boolean @default(false) @map("is_active")

  // how it is USED in recipes
  recipeUnit RecipeUnit @map("recipe_unit") // 150 MILLILITER

  // how it is SOLD variations
  productVariants ProductVariant[] //packaging, weight, price

  recipes          Ingredient[] // in what recipes is it used
  shoppingListItem ShoppingListItem[]
  orderItems       OrderItem[]
  cartItems        CartItem[]

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("products")
}

model ProductVariant {
  productVariantId String @id @default(cuid()) @map("product_variant_id")
  label            String //Green grape, ground beef,

  // optional: description for UI
  variantNote String? @map("variant_note") // "500g pack", organic...

  cartItems CartItem[]

  pricingAmount Decimal  @map("pricing_amount") @db.Decimal(10, 3) //количество по данной цене
  pricingUnit   SaleUnit @map("pricing_unit") // GRAM / KILOGRAM / PIECE
  price         Decimal  @db.Decimal(10, 2)

  product   Product @relation(fields: [productId], references: [productId], onDelete: Cascade)
  productId String  @map("product_id")

  createdAt DateTime @default(now()) @map("created_at")

  @@unique([productId, pricingAmount, pricingUnit, label])
  @@map("product_variants")
}
